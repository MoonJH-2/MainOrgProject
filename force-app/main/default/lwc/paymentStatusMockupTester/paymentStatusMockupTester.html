<template>
    <div class="mockup-tester-container">
        <!-- í…ŒìŠ¤íŠ¸ ì»¨íŠ¸ë¡¤ í—¤ë” -->
        <div class="tester-header">
            <h3 class="tester-title">
                <lightning-icon icon-name="utility:test" size="small"></lightning-icon>
                PaymentStatus í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
            </h3>
            <div class="control-buttons">
                <lightning-button
                    label="ì‹¤ì œ ë°ì´í„° ë³µì›"
                    variant="neutral"
                    icon-name="utility:refresh"
                    onclick={handleRestoreRealData}
                    size="small">
                </lightning-button>
                <lightning-button
                    label="ìƒˆë¡œê³ ì¹¨"
                    variant="brand"
                    icon-name="utility:sync"
                    onclick={handleRefreshMockup}
                    disabled={isLoading}
                    size="small">
                </lightning-button>
            </div>
        </div>

        <!-- ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ -->
        <div class="scenario-selector">
            <lightning-combobox
                name="scenario"
                label="í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ"
                value={currentScenario}
                options={scenarioOptions}
                onchange={handleScenarioChange}
                variant="label-inline"
                disabled={isLoading}>
            </lightning-combobox>
        </div>

        <!-- ë¡œë”© ìƒíƒœ -->
        <template if:true={isLoading}>
            <div class="loading-container">
                <lightning-spinner alternative-text="Mockup ë°ì´í„° ë¡œë”© ì¤‘..." size="small"></lightning-spinner>
            </div>
        </template>

        <!-- Mockup ë°ì´í„° ë¯¸ë¦¬ë³´ê¸° -->
        <template if:true={mockupData}>
            <div class="mockup-preview">
                <div class="preview-header">
                    <h4>ðŸ“Š í˜„ìž¬ ì‹œë‚˜ë¦¬ì˜¤ ë¯¸ë¦¬ë³´ê¸°</h4>
                </div>
                
                <div class="preview-content">
                    <div class="summary-card">
                        <div class="summary-item">
                            <span class="label">ì§„í–‰ë¥ :</span>
                            <span class="value progress">{mockupData.paymentSummary.progressPercentage}%</span>
                        </div>
                        <div class="summary-item">
                            <span class="label">ì™„ë‚©:</span>
                            <span class="value completed">{mockupData.paymentSummary.completedPayments}ê°œ</span>
                        </div>
                        <div class="summary-item">
                            <span class="label">ì—°ì²´:</span>
                            <span class="value overdue">{mockupData.paymentSummary.overduePayments}ê°œ</span>
                        </div>
                        <div class="summary-item">
                            <span class="label">ë¯¸ë‚©:</span>
                            <span class="value remaining">{mockupData.paymentSummary.remainingPayments}ê°œ</span>
                        </div>
                    </div>

                    <div class="payments-list">
                        <template for:each={mockupData.mockupPayments} for:item="payment">
                            <div key={payment.installmentNumber} class="payment-item">
                                <span class="installment">{payment.installmentNumber}ì°¨</span>
                                <span class="status-badge" data-status={payment.status}>{payment.status}</span>
                                <span class="amount">â‚©{payment.amount}</span>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </template>
    </div>
</template>
