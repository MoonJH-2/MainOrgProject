// Contract 00000112 ìƒíƒœ í™•ì¸ ë° ìˆ˜ì •
System.debug('ğŸ” =====Contract 00000112 ìƒíƒœ í™•ì¸=====');

try {
    // 1. Contract 00000112 ì¡°íšŒ
    List<Contract> contracts = [
        SELECT Id, ContractNumber, Status, AccountId, Account.Name, 
               StartDate, EndDate, ActivatedDate, ActivatedById
        FROM Contract 
        WHERE ContractNumber = '00000112'
        LIMIT 1
    ];
    
    if (contracts.isEmpty()) {
        System.debug('âŒ Contract 00000112ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
    }
    
    Contract targetContract = contracts[0];
    System.debug('ğŸ“‹ Contract ì •ë³´:');
    System.debug('   â€¢ Contract Number: ' + targetContract.ContractNumber);
    System.debug('   â€¢ Account: ' + targetContract.Account.Name);
    System.debug('   â€¢ Status: ' + targetContract.Status);
    System.debug('   â€¢ Start Date: ' + targetContract.StartDate);
    System.debug('   â€¢ End Date: ' + targetContract.EndDate);
    System.debug('   â€¢ Activated Date: ' + targetContract.ActivatedDate);
    
    // 2. Contract Status í•„ë“œì˜ picklist ê°’ë“¤ í™•ì¸
    Schema.DescribeFieldResult fieldResult = Contract.Status.getDescribe();
    List<Schema.PicklistEntry> picklistEntries = fieldResult.getPicklistValues();
    
    System.debug('');
    System.debug('âœ… ì‚¬ìš© ê°€ëŠ¥í•œ Status ê°’ë“¤:');
    for (Schema.PicklistEntry entry : picklistEntries) {
        if (entry.isActive()) {
            System.debug('   â€¢ ' + entry.getValue() + ' (' + entry.getLabel() + ')');
        }
    }
    
    // 3. í˜„ì¬ Status ê°’ì´ ìœ íš¨í•œì§€ í™•ì¸
    Boolean isValidStatus = false;
    for (Schema.PicklistEntry entry : picklistEntries) {
        if (entry.isActive() && entry.getValue() == targetContract.Status) {
            isValidStatus = true;
            break;
        }
    }
    
    System.debug('');
    System.debug('ğŸ“Š Status ê²€ì¦ ê²°ê³¼:');
    System.debug('   â€¢ í˜„ì¬ Status: ' + targetContract.Status);
    System.debug('   â€¢ ìœ íš¨í•œ ê°’ì¸ê°€: ' + isValidStatus);
    
    // 4. Statusê°€ ìœ íš¨í•˜ì§€ ì•Šë‹¤ë©´ ìˆ˜ì •
    if (!isValidStatus) {
        System.debug('');
        System.debug('ğŸ”§ Status ìˆ˜ì • ì¤‘...');
        
        Contract contractToUpdate = new Contract();
        contractToUpdate.Id = targetContract.Id;
        contractToUpdate.Status = 'Activated'; // ìœ íš¨í•œ ê°’ìœ¼ë¡œ ì„¤ì •
        
        try {
            update contractToUpdate;
            System.debug('âœ… Contract Statusê°€ "Activated"ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
        } catch (Exception e) {
            System.debug('âŒ Contract ìˆ˜ì • ì‹¤íŒ¨: ' + e.getMessage());
        }
    } else {
        System.debug('âœ… í˜„ì¬ StatusëŠ” ìœ íš¨í•©ë‹ˆë‹¤.');
    }
    
} catch (Exception e) {
    System.debug('âŒ ì˜¤ë¥˜ ë°œìƒ: ' + e.getMessage());
    System.debug('   ìŠ¤íƒ ì¶”ì : ' + e.getStackTraceString());
}

System.debug('');
System.debug('âœ… =====Contract ìƒíƒœ í™•ì¸ ì™„ë£Œ=====');
