/**
 * ì „ì²´ ì¡°ì§ì˜ Slack â†’ Salesforce ì±„ë„ ì™„ì „ ì „í™˜ ì‹¤í–‰
 * ëª©ì : ëª¨ë“  Orderì˜ ì±„ë„ì„ Salesforceë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
 */

System.debug('=== ğŸŒ ì „ì²´ ì¡°ì§ ì™„ì „ ì „í™˜ ì‹œì‘ ===');

// ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
SlackToSalesforceChannelMigrationService.executeFullMigration();

// íŠ¹ì • Order ìƒíƒœ í™•ì¸ (ì˜ˆì‹œ)
System.debug('\n=== ğŸ” Order 00000155 ìƒíƒœ í™•ì¸ ===');
SlackToSalesforceChannelMigrationService.checkMigrationStatus('00000155');

System.debug('\n=== ğŸ“Š ì „ì²´ í˜„í™© ìš”ì•½ ===');

// ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ ì „ì²´ ì±„ë„ í˜„í™©
List<CollaborationGroup> allChannels = [
    SELECT Id, Name, MemberCount, CreatedDate
    FROM CollaborationGroup 
    WHERE Name LIKE 'Order-%' OR Name LIKE '%00000%'
    ORDER BY CreatedDate DESC
    LIMIT 20
];

System.debug('ì´ Salesforce ì±„ë„ ìˆ˜: ' + allChannels.size());
for(CollaborationGroup channel : allChannels) {
    System.debug('- ' + channel.Name + ' (ë©¤ë²„: ' + channel.MemberCount + ')');
}

// ë§ˆì´ê·¸ë ˆì´ì…˜ëœ Order ìˆ˜ í™•ì¸
List<Order> migratedOrders = [
    SELECT Id, OrderNumber, Slack_Notification_Status__c
    FROM Order 
    WHERE Slack_Notification_Status__c LIKE '%Migrated%'
    ORDER BY LastModifiedDate DESC
    LIMIT 10
];

System.debug('\në§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œëœ Order ìˆ˜: ' + migratedOrders.size());
for(Order order : migratedOrders) {
    System.debug('- ' + order.OrderNumber + ' (' + order.Slack_Notification_Status__c + ')');
}

System.debug('\n=== âœ… ì „ì²´ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ ===');
