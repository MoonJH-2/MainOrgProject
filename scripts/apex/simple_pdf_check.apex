// ê°„ë‹¨í•œ PDF ì²¨ë¶€ í…ŒìŠ¤íŠ¸
System.debug('ğŸ“ Order 00000115 PDF ì²¨ë¶€ í…ŒìŠ¤íŠ¸');

// Order ì¡°íšŒ
List<Order> orders = [SELECT Id, OrderNumber FROM Order WHERE OrderNumber = '00000115'];
if (orders.isEmpty()) {
    System.debug('âŒ Order ì—†ìŒ');
    return;
}

Order order = orders[0];
System.debug('âœ… Order: ' + order.OrderNumber + ' (ID: ' + order.Id + ')');

// PDF íŒŒì¼ ì¡°íšŒ
List<ContentDocumentLink> pdfs = [
    SELECT ContentDocument.Id, ContentDocument.Title 
    FROM ContentDocumentLink 
    WHERE LinkedEntityId = :order.Id 
    AND ContentDocument.FileExtension = 'pdf'
    ORDER BY ContentDocument.CreatedDate DESC
];

System.debug('ğŸ“„ PDF íŒŒì¼: ' + pdfs.size() + 'ê°œ');
for (ContentDocumentLink pdf : pdfs) {
    System.debug('   â€¢ ' + pdf.ContentDocument.Title + '.pdf');
}

if (!pdfs.isEmpty()) {
    // ìµœì‹  PDFì˜ ContentVersion í™•ì¸
    List<ContentVersion> cv = [
        SELECT Title, ContentSize, VersionData
        FROM ContentVersion 
        WHERE ContentDocumentId = :pdfs[0].ContentDocument.Id 
        AND IsLatest = true
    ];
    
    if (!cv.isEmpty()) {
        System.debug('ğŸ“‹ ìµœì‹  PDF ì •ë³´:');
        System.debug('   ì œëª©: ' + cv[0].Title);
        System.debug('   í¬ê¸°: ' + (cv[0].ContentSize / 1024) + 'KB');
        System.debug('   ë°ì´í„°: ' + (cv[0].VersionData != null ? 'ìˆìŒ' : 'ì—†ìŒ'));
        
        if (cv[0].VersionData != null) {
            System.debug('   ì‹¤ì œ í¬ê¸°: ' + (cv[0].VersionData.size() / 1024) + 'KB');
        }
    }
}

System.debug('âœ… PDF ìƒíƒœ í™•ì¸ ì™„ë£Œ');
