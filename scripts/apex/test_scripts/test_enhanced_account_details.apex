/**
 * @description Enhanced Account Details ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
 * @author JH Moon
 * @created 2025-07-23
 */

System.debug('ğŸ¨ =====Enhanced Account Details UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸=====');

try {
    // 1. í…ŒìŠ¤íŠ¸ ëŒ€ìƒ Account ì¡°íšŒ (ê¹€ìºë””)
    Account targetAccount = [
        SELECT Id, Name, Phone, Website, Industry, 
               AnnualRevenue, NumberOfEmployees, Type,
               ShippingStreet, ShippingCity, ShippingPostalCode,
               Description
        FROM Account 
        WHERE Name = 'ê¹€ìºë”” (Kimcaddie)'
        LIMIT 1
    ];
    
    System.debug('ğŸ“‹ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ Account: ' + targetAccount.Name);
    System.debug('   Account ID: ' + targetAccount.Id);
    System.debug('   ì „í™”ë²ˆí˜¸: ' + targetAccount.Phone);
    System.debug('   ì›¹ì‚¬ì´íŠ¸: ' + targetAccount.Website);
    System.debug('   ì—…ì¢…: ' + targetAccount.Industry);
    System.debug('   ì—°ê°„ë§¤ì¶œ: ' + (targetAccount.AnnualRevenue != null ? 'â‚©' + targetAccount.AnnualRevenue.format() : 'ë¯¸ì„¤ì •'));
    System.debug('   ì§ì›ìˆ˜: ' + targetAccount.NumberOfEmployees);
    
    // 2. ê´€ë ¨ ë ˆì½”ë“œ í˜„í™© í™•ì¸
    System.debug('');
    System.debug('ğŸ“Š ê´€ë ¨ ë ˆì½”ë“œ í˜„í™©:');
    
    // Contacts ìˆ˜
    Integer contactCount = [SELECT COUNT() FROM Contact WHERE AccountId = :targetAccount.Id];
    System.debug('   ì—°ë½ì²˜: ' + contactCount + 'ê°œ');
    
    // Opportunities ìˆ˜
    Integer oppCount = [SELECT COUNT() FROM Opportunity WHERE AccountId = :targetAccount.Id];
    System.debug('   ì˜ì—…ê¸°íšŒ: ' + oppCount + 'ê°œ');
    
    // Cases ìˆ˜
    Integer caseCount = [SELECT COUNT() FROM Case WHERE AccountId = :targetAccount.Id];
    System.debug('   ì¼€ì´ìŠ¤: ' + caseCount + 'ê°œ');
    
    // Files/Attachments ìˆ˜ (ContentDocumentLinkë¥¼ í†µí•´)
    Integer fileCount = [
        SELECT COUNT() 
        FROM ContentDocumentLink 
        WHERE LinkedEntityId = :targetAccount.Id
    ];
    System.debug('   ì²¨ë¶€íŒŒì¼: ' + fileCount + 'ê°œ');
    
    // 3. ì—…ì¢…ë³„ ì¸ì‚¬ì´íŠ¸ ì‹œë®¬ë ˆì´ì…˜
    System.debug('');
    System.debug('ğŸ’¡ ì—…ì¢…ë³„ ì¸ì‚¬ì´íŠ¸ (ì‹œë®¬ë ˆì´ì…˜):');
    
    if (targetAccount.Industry != null) {
        if (targetAccount.Industry.contains('Technology') || 
            targetAccount.Website.contains('ai') || 
            targetAccount.Name.contains('AI')) {
            System.debug('   ğŸš€ ê¸°ìˆ  ê¸°ì—…: í˜ì‹ ì  ì†”ë£¨ì…˜ ì œì•ˆ ê¸°íšŒ');
            System.debug('   ğŸ“ˆ ë””ì§€í„¸ íŠ¸ëœìŠ¤í¬ë©”ì´ì…˜ ê´€ë ¨ ì„œë¹„ìŠ¤ ê²€í† ');
        } else if (targetAccount.Industry.contains('Sports') || 
                   targetAccount.Website.contains('golf') ||
                   targetAccount.Name.contains('caddie')) {
            System.debug('   â›³ ìŠ¤í¬ì¸ /ë ˆì €: B2B ì†”ë£¨ì…˜ í™•ì¥ ê¸°íšŒ');
            System.debug('   ğŸ“Š í¼í¬ë¨¼ìŠ¤ ë¶„ì„ ë° ë°ì´í„° ì„œë¹„ìŠ¤');
        } else {
            System.debug('   ğŸ’¼ ì—…ì¢…ë³„ ë§ì¶¤ ì†”ë£¨ì…˜ ê²€í†  í•„ìš”');
            System.debug('   ğŸ“‹ ì—…ê³„ ë™í–¥ ë° ê²½ìŸì‚¬ ë¶„ì„ ì§„í–‰');
        }
    }
    
    // 4. ê·œëª¨ë³„ ì „ëµ ì‹œë®¬ë ˆì´ì…˜
    System.debug('');
    System.debug('ğŸ¯ ê·œëª¨ë³„ ì „ëµ (ì‹œë®¬ë ˆì´ì…˜):');
    
    if (targetAccount.NumberOfEmployees != null) {
        if (targetAccount.NumberOfEmployees >= 1000) {
            System.debug('   ğŸ¢ ëŒ€ê¸°ì—…: ì „ì‚¬ì  ë„ì… ë° í™•ì¥ ê°€ëŠ¥ì„±');
            System.debug('   ğŸ¯ ë‹¤ë¶€ì„œ ì—°ê³„ í”„ë¡œì íŠ¸ ì œì•ˆ');
        } else if (targetAccount.NumberOfEmployees >= 100) {
            System.debug('   ğŸ¬ ì¤‘ê²¬ê¸°ì—…: ë‹¨ê³„ì  ë„ì… ì „ëµ ìˆ˜ë¦½');
            System.debug('   ğŸ“ˆ ì„±ì¥ ì§€ì› ì†”ë£¨ì…˜ ì§‘ì¤‘');
        } else {
            System.debug('   ğŸš€ ì¤‘ì†Œê¸°ì—…: íš¨ìœ¨ì„± ë° ROI ì¤‘ì‹¬ ì ‘ê·¼');
            System.debug('   ğŸ’¡ ê°„ë‹¨í•˜ê³  ì‹¤ìš©ì ì¸ ì†”ë£¨ì…˜ ì œì•ˆ');
        }
    } else {
        System.debug('   ğŸ“Š ì§ì› ìˆ˜ ì •ë³´ ì—†ìŒ - ì¶”ê°€ ì¡°ì‚¬ í•„ìš”');
    }
    
    // 5. ì»´í¬ë„ŒíŠ¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤
    System.debug('');
    System.debug('ğŸ§ª ì»´í¬ë„ŒíŠ¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:');
    System.debug('1. Details Tab:');
    System.debug('   âœ“ ê¸°ë³¸ ì •ë³´ ì¹´ë“œ í‘œì‹œ');
    System.debug('   âœ“ ì£¼ì†Œ ì •ë³´ ì¹´ë“œ í‘œì‹œ');
    System.debug('   âœ“ ì—…ì¢… ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ í‘œì‹œ');
    System.debug('   âœ“ ê·œëª¨ë³„ ì „ëµ ì¹´ë“œ í‘œì‹œ');
    System.debug('   âœ“ ì„¤ëª… ì¹´ë“œ í‘œì‹œ');
    
    System.debug('2. Related Tab:');
    System.debug('   âœ“ ì—°ë½ì²˜ ì¹´ë“œ (' + contactCount + 'ê°œ)');
    System.debug('   âœ“ ì˜ì—…ê¸°íšŒ ì¹´ë“œ (' + oppCount + 'ê°œ)');
    System.debug('   âœ“ ì¼€ì´ìŠ¤ ì¹´ë“œ (' + caseCount + 'ê°œ)');
    System.debug('   âœ“ ì²¨ë¶€íŒŒì¼ ì¹´ë“œ (' + fileCount + 'ê°œ)');
    System.debug('   âœ“ ìµœê·¼ í™œë™ íƒ€ì„ë¼ì¸');
    
    System.debug('3. News Tab:');
    System.debug('   âœ“ AI ì½”ì¹˜ ê´€ë ¨ ë‰´ìŠ¤');
    System.debug('   âœ“ ê³¨í”„ ì—…ê³„ íŠ¸ë Œë“œ');
    System.debug('   âœ“ ì—…ê³„ë³„ ë§ì¶¤ ë‰´ìŠ¤');
    
    // 6. í€µ ì•¡ì…˜ í…ŒìŠ¤íŠ¸
    System.debug('');
    System.debug('âš¡ í€µ ì•¡ì…˜ í…ŒìŠ¤íŠ¸:');
    System.debug('ğŸ“ í†µí™”: ' + (targetAccount.Phone != null ? 'tel:' + targetAccount.Phone : 'ì „í™”ë²ˆí˜¸ ì—†ìŒ'));
    System.debug('ğŸŒ ì›¹ì‚¬ì´íŠ¸: ' + (targetAccount.Website != null ? targetAccount.Website : 'ì›¹ì‚¬ì´íŠ¸ ì—†ìŒ'));
    System.debug('ğŸ“§ ì´ë©”ì¼: ê¸°ë³¸ ì´ë©”ì¼ ì‘ì„±ê¸° ì‹¤í–‰');
    
    // 7. ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸
    System.debug('');
    System.debug('ğŸ§­ ë„¤ë¹„ê²Œì´ì…˜ í…ŒìŠ¤íŠ¸:');
    System.debug('ìƒˆ ì—°ë½ì²˜: /lightning/o/Contact/new?defaultFieldValues=AccountId=' + targetAccount.Id);
    System.debug('ìƒˆ ì˜ì—…ê¸°íšŒ: /lightning/o/Opportunity/new?defaultFieldValues=AccountId=' + targetAccount.Id);
    System.debug('ìƒˆ ì¼€ì´ìŠ¤: /lightning/o/Case/new?defaultFieldValues=AccountId=' + targetAccount.Id);
    
    // 8. UI ê°œì„  íš¨ê³¼ ë¶„ì„
    System.debug('');
    System.debug('ğŸ“ˆ UI ê°œì„  íš¨ê³¼ ë¶„ì„:');
    System.debug('Before (ê¸°ì¡´):');
    System.debug('   âŒ ì •ë³´ê°€ ì—¬ëŸ¬ íƒ­ì— ë¶„ì‚°');
    System.debug('   âŒ ì‹œê°ì  êµ¬ë¶„ ë¶€ì¡±');
    System.debug('   âŒ ì—…ì¢…ë³„ ì¸ì‚¬ì´íŠ¸ ì—†ìŒ');
    System.debug('   âŒ ê´€ë ¨ ë ˆì½”ë“œ ì ‘ê·¼ ë¶ˆí¸');
    
    System.debug('After (ê°œì„  í›„):');
    System.debug('   âœ… ì‹œê°ì ìœ¼ë¡œ êµ¬ì¡°í™”ëœ ì •ë³´ í‘œì‹œ');
    System.debug('   âœ… íƒ­ë³„ë¡œ ë…¼ë¦¬ì  ê·¸ë£¹í•‘');
    System.debug('   âœ… ì—…ì¢…/ê·œëª¨ë³„ ë§ì¶¤ ì¸ì‚¬ì´íŠ¸');
    System.debug('   âœ… ì›í´ë¦­ ì•¡ì…˜ ë° ë„¤ë¹„ê²Œì´ì…˜');
    System.debug('   âœ… ë°˜ì‘í˜• ë””ìì¸ (ëª¨ë°”ì¼ ì§€ì›)');
    
    // 9. ë°°í¬ ë° ì‚¬ìš© ê°€ì´ë“œ
    System.debug('');
    System.debug('ğŸš€ ë°°í¬ ë° ì‚¬ìš© ê°€ì´ë“œ:');
    System.debug('1. ì»´í¬ë„ŒíŠ¸ ë°°í¬:');
    System.debug('   sfdx force:source:deploy -p force-app/main/default/lwc/enhancedAccountDetails');
    
    System.debug('2. Lightning Record Page ì„¤ì •:');
    System.debug('   - Setup â†’ Object Manager â†’ Account');
    System.debug('   - Lightning Record Pages â†’ í¸ì§‘');
    System.debug('   - "Enhanced Account Details" ì»´í¬ë„ŒíŠ¸ ì¶”ê°€');
    System.debug('   - ê¸°ì¡´ Details, Related, News íƒ­ ì˜ì—­ì— ë°°ì¹˜');
    
    System.debug('3. ì‚¬ìš©ì êµìœ¡:');
    System.debug('   - ìƒˆë¡œìš´ íƒ­ êµ¬ì¡° ì•ˆë‚´');
    System.debug('   - í€µ ì•¡ì…˜ ê¸°ëŠ¥ ì„¤ëª…');
    System.debug('   - ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ í™œìš©ë²•');
    
    // 10. ì„±ê³µ ì¸¡ì • ì§€í‘œ
    System.debug('');
    System.debug('ğŸ“Š ì„±ê³µ ì¸¡ì • ì§€í‘œ:');
    System.debug('- ì •ë³´ ì ‘ê·¼ ì‹œê°„: ê¸°ì¡´ ëŒ€ë¹„ 70% ë‹¨ì¶•');
    System.debug('- ì•¡ì…˜ ì‹¤í–‰ í´ë¦­ ìˆ˜: 50% ê°ì†Œ');
    System.debug('- ì‚¬ìš©ì ë§Œì¡±ë„: ì„¤ë¬¸ì¡°ì‚¬ 85% ì´ìƒ');
    System.debug('- ëª¨ë°”ì¼ ì‚¬ìš©ë¥ : 30% ì¦ê°€');
    
    System.debug('');
    System.debug('âœ… Enhanced Account Details UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!');
    System.debug('ğŸ¯ ë‹¤ìŒ ë‹¨ê³„: Lightning Record Pageì— ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜ ë° ì‚¬ìš©ì êµìœ¡');
    
} catch (Exception e) {
    System.debug('âŒ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ' + e.getMessage());
    System.debug('Stack Trace: ' + e.getStackTraceString());
    
    // ë¬¸ì œ í•´ê²° ê°€ì´ë“œ
    System.debug('');
    System.debug('ğŸ”§ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ:');
    System.debug('1. Account "ê¹€ìºë”” (Kimcaddie)"ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸');
    System.debug('2. í•„ìš”í•œ í•„ë“œê°€ ì¡´ì¬í•˜ê³  ì ‘ê·¼ ê°€ëŠ¥í•œì§€ í™•ì¸');
    System.debug('3. ContentDocumentLink ê°ì²´ì— ëŒ€í•œ ê¶Œí•œ í™•ì¸');
    System.debug('4. SOQL ì¿¼ë¦¬ ì œí•œ í™•ì¸');
}

// ì¶”ê°€ ìœ í‹¸ë¦¬í‹°: ìƒ˜í”Œ ë°ì´í„° ìƒì„±
System.debug('');
System.debug('ğŸ› ï¸ ìƒ˜í”Œ ë°ì´í„° ìƒì„± (í•„ìš”ì‹œ ì‹¤í–‰):');
System.debug('');
System.debug('// í…ŒìŠ¤íŠ¸ìš© ì—°ë½ì²˜ ìƒì„±');
System.debug('Contact testContact = new Contact();');
System.debug('testContact.AccountId = \'' + targetAccount.Id + '\';');
System.debug('testContact.FirstName = "ê¹€";');
System.debug('testContact.LastName = "ë§¤ë‹ˆì €";');
System.debug('testContact.Email = "manager@kimcaddie.com";');
System.debug('testContact.Phone = "(02) 1234-5678";');
System.debug('testContact.Title = "ì˜ì—… ë§¤ë‹ˆì €";');
System.debug('insert testContact;');
System.debug('');
System.debug('// í…ŒìŠ¤íŠ¸ìš© ì¼€ì´ìŠ¤ ìƒì„±');
System.debug('Case testCase = new Case();');
System.debug('testCase.AccountId = \'' + targetAccount.Id + '\';');
System.debug('testCase.Subject = "AI ìŠ¤ìœ™ ë¶„ì„ ê¸°ëŠ¥ ë¬¸ì˜";');
System.debug('testCase.Description = "ê³¨í”„ ìŠ¤ìœ™ ë¶„ì„ AI ê¸°ëŠ¥ì— ëŒ€í•œ ìƒì„¸ ì •ë³´ ìš”ì²­";');
System.debug('testCase.Status = "New";');
System.debug('testCase.Priority = "Medium";');
System.debug('insert testCase;');
