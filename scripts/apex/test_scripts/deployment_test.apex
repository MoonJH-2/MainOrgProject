/**
 * ë°°í¬ìš© ê°„ì†Œí™” ë²„ì „ í…ŒìŠ¤íŠ¸
 * ëª©ì : í‘œì¤€ í•„ë“œë§Œ ì‚¬ìš©í•˜ì—¬ ë°°í¬ ê°€ëŠ¥í•œ ìƒíƒœ í™•ì¸
 */

System.debug('=== ë°°í¬ìš© ê°„ì†Œí™” ë²„ì „ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');

try {
    // PerformanceTrackingServiceSimple í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
    System.debug('--- ê°„ì†Œí™”ëœ ëŒ€ì‹œë³´ë“œ ë°ì´í„° ì¡°íšŒ í…ŒìŠ¤íŠ¸ ---');
    
    PerformanceTrackingServiceSimple.DashboardData dashboardData = 
        PerformanceTrackingServiceSimple.getDashboardData();
    
    if(dashboardData != null) {
        System.debug('âœ… ê°„ì†Œí™” ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë”© ì„±ê³µ!');
        
        // ì˜¤ëŠ˜ì˜ ì˜ˆìƒ ë§¤ì¶œ í…ŒìŠ¤íŠ¸
        if(dashboardData.todayRevenue != null) {
            System.debug('ğŸ’° ì˜¤ëŠ˜ ì˜ˆìƒ ë§¤ì¶œ: â‚©' + dashboardData.todayRevenue.expectedAmount);
            System.debug('ğŸ¯ ë‹¬ì„±ë¥ : ' + dashboardData.todayRevenue.achievementRate + '%');
            System.debug('ğŸ“Š ìƒíƒœ: ' + dashboardData.todayRevenue.status);
        }
        
        // ì›”ê°„ ê°±ì‹  í˜„í™© í…ŒìŠ¤íŠ¸
        if(dashboardData.monthlyRenewal != null) {
            System.debug('ğŸ“ˆ ì™„ë£Œ ê°±ì‹ : ' + dashboardData.monthlyRenewal.completedCount + 'ê±´');
            System.debug('ğŸ”„ ì§„í–‰ ê°±ì‹ : ' + dashboardData.monthlyRenewal.inProgressCount + 'ê±´');
        }
        
        // ê³ ê° ê±´ê°•ë„ í…ŒìŠ¤íŠ¸
        if(dashboardData.customerHealth != null) {
            System.debug('ğŸŸ¢ ê±´ê°• ê³ ê°: ' + dashboardData.customerHealth.healthyCount + 'ëª…');
            System.debug('ğŸŸ¡ ì£¼ì˜ ê³ ê°: ' + dashboardData.customerHealth.warningCount + 'ëª…');
            System.debug('ğŸ”´ ìœ„í—˜ ê³ ê°: ' + dashboardData.customerHealth.riskCount + 'ëª…');
        }
        
        // íš¨ìœ¨ì„± ì§€í‘œ í…ŒìŠ¤íŠ¸
        if(dashboardData.efficiency != null) {
            System.debug('âš¡ ì„±ê³µë¥ : ' + dashboardData.efficiency.successRate + '%');
            System.debug('ğŸ“Š ì›”ê°„ ì²˜ë¦¬: ' + dashboardData.efficiency.monthlyProcessCount + 'ê±´');
        }
        
        // ê²Œì„í™” í…ŒìŠ¤íŠ¸
        if(dashboardData.gamification != null) {
            System.debug('ğŸ† í˜„ì¬ ë ˆë²¨: ' + dashboardData.gamification.currentLevel);
            System.debug('ğŸ’° í˜„ì¬ ê¸ˆì•¡: â‚©' + dashboardData.gamification.currentAmount);
            System.debug('ğŸ“ˆ ì§„í–‰ë¥ : ' + dashboardData.gamification.progressPercentage + '%');
        }
        
        // ì•Œë¦¼ í…ŒìŠ¤íŠ¸
        if(dashboardData.notifications != null) {
            System.debug('ğŸ”” ì•Œë¦¼ ìˆ˜: ' + dashboardData.notifications.size() + 'ê±´');
            for(PerformanceTrackingServiceSimple.SmartNotification notif : dashboardData.notifications) {
                System.debug('  - ' + notif.title + ': ' + notif.message);
            }
        }
        
        // ìƒˆë¡œê³ ì¹¨ í…ŒìŠ¤íŠ¸
        String refreshResult = PerformanceTrackingServiceSimple.refreshDashboard();
        System.debug('ğŸ”„ ìƒˆë¡œê³ ì¹¨ ê²°ê³¼: ' + refreshResult);
        
        System.debug('');
        System.debug('âœ… === ë°°í¬ìš© ê°„ì†Œí™” ë²„ì „ í…ŒìŠ¤íŠ¸ ì„±ê³µ ===');
        System.debug('ğŸ¯ í‘œì¤€ í•„ë“œë§Œ ì‚¬ìš©í•˜ì—¬ ë°°í¬ ê°€ëŠ¥í•œ ìƒíƒœ í™•ì¸ë¨');
        System.debug('âš¡ í•µì‹¬ ê¸°ëŠ¥ ëª¨ë‘ ì •ìƒ ì‘ë™');
        System.debug('ğŸ“Š ì‹¤ì œ Salesforce í™˜ê²½ì—ì„œ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ');
        
    } else {
        System.debug('âŒ ê°„ì†Œí™” ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨');
    }
    
} catch(Exception e) {
    System.debug('âŒ ë°°í¬ìš© í…ŒìŠ¤íŠ¸ ì¤‘ ì˜ˆì™¸ ë°œìƒ: ' + e.getMessage());
    System.debug('ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤: ' + e.getStackTraceString());
}

System.debug('=== ë°°í¬ìš© ê°„ì†Œí™” ë²„ì „ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
