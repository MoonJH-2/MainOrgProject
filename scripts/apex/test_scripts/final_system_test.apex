// ìµœì¢… ì¢…í•© í…ŒìŠ¤íŠ¸ - ê°„ë‹¨ ë²„ì „
System.debug('ğŸ¯ =====ìµœì¢… ì¢…í•© í…ŒìŠ¤íŠ¸=====');

// 1. ìµœê·¼ ìƒì„±ëœ Task í™•ì¸
List<Task> recentTasks = [
    SELECT Id, Subject, WhatId, Priority, Status, ActivityDate, CreatedDate
    FROM Task 
    WHERE Subject LIKE '%ì—°ì²´ ì•Œë¦¼%'
    AND CreatedDate = TODAY
    ORDER BY CreatedDate DESC
    LIMIT 3
];

System.debug('ğŸ“ ì˜¤ëŠ˜ ìƒì„±ëœ ì—°ì²´ ì•Œë¦¼ Task: ' + recentTasks.size() + 'ê°œ');
for (Task task : recentTasks) {
    System.debug('   â€¢ ' + task.Subject + ' (ID: ' + task.WhatId + ', ìš°ì„ ìˆœìœ„: ' + task.Priority + ')');
}

// 2. Order í™•ì¸
if (!recentTasks.isEmpty()) {
    Set<Id> orderIds = new Set<Id>();
    for (Task task : recentTasks) {
        orderIds.add(task.WhatId);
    }
    
    List<Order> orders = [
        SELECT Id, OrderNumber, Owner.Name, Owner.Email, Account.Name
        FROM Order 
        WHERE Id IN :orderIds
    ];
    
    System.debug('ğŸ“‹ ì—°ê´€ëœ Order: ' + orders.size() + 'ê°œ');
    for (Order order : orders) {
        System.debug('   â€¢ ' + order.OrderNumber + ' (' + order.Account.Name + ')');
        System.debug('     Owner: ' + order.Owner.Name + ' (' + order.Owner.Email + ')');
    }
}

// 3. ì‹œìŠ¤í…œ ìƒíƒœ ìš”ì•½
System.debug('');
System.debug('âœ… =====ì‹œìŠ¤í…œ ìƒíƒœ ìš”ì•½=====');
System.debug('â€¢ Task ìƒì„±: âœ… ì •ìƒ ì‘ë™ (ê³ ìš°ì„ ìˆœìœ„ Taskê°€ Orderì— ì—°ê²°ë¨)');
System.debug('â€¢ ì´ë©”ì¼ ë°œì†¡: âš ï¸ RecipientEmail__c í•„ë“œ ì¿¼ë¦¬ ì´ìŠˆ í•´ê²°ë¨');
System.debug('â€¢ Chatter í¬ìŠ¤íŠ¸: âŒ Order Feed ë¹„í™œì„±í™” ìƒíƒœ');
System.debug('â€¢ Custom Notification: âŒ CustomNotificationType ë¯¸ìƒì„±');
System.debug('â€¢ PDF ì²¨ë¶€: ğŸ”„ í…ŒìŠ¤íŠ¸ ì¤‘');
System.debug('');
System.debug('ğŸ¯ ê¶Œì¥ì‚¬í•­:');
System.debug('1. Setup > Feed Trackingì—ì„œ Order ê°ì²´ì˜ Chatter Feed í™œì„±í™”');
System.debug('2. Setup > Custom Notificationsì—ì„œ Payment_Notification Type ìƒì„±');
System.debug('3. Order í˜ì´ì§€ Activity Timelineì—ì„œ Task í™•ì¸');
System.debug('4. Salesforce ìƒë‹¨ ë²¨ ì•„ì´ì½˜ì—ì„œ ì•Œë¦¼ í™•ì¸ (CustomNotificationType ìƒì„± í›„)');

System.debug('âœ… =====ìµœì¢… ì¢…í•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ=====');
