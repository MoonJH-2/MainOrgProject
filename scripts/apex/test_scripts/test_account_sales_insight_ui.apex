/**
 * @description Account ì˜ì—… íš¨ìœ¨ì„± UI ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
 * @author JH Moon
 * @created 2025-07-23
 */

System.debug('ğŸ¯ =====Account ì˜ì—… íš¨ìœ¨ì„± UI ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸=====');

try {
    // 1. í…ŒìŠ¤íŠ¸ ëŒ€ìƒ Account ì¡°íšŒ (ê¹€ìºë””)
    Account targetAccount = [
        SELECT Id, Name, Key_Account__c, Industry, Phone, Website, 
               AnnualRevenue, NumberOfEmployees, Type, AccountSource
        FROM Account 
        WHERE Name = 'ê¹€ìºë”” (Kimcaddie)'
        LIMIT 1
    ];
    
    System.debug('ğŸ“‹ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ Account: ' + targetAccount.Name);
    System.debug('   Account ID: ' + targetAccount.Id);
    System.debug('   Key Account: ' + targetAccount.Key_Account__c);
    System.debug('   ì „í™”ë²ˆí˜¸: ' + targetAccount.Phone);
    System.debug('   ì›¹ì‚¬ì´íŠ¸: ' + targetAccount.Website);
    
    // 2. AccountSalesInsightService í…ŒìŠ¤íŠ¸
    System.debug('');
    System.debug('ğŸ” AccountSalesInsightService í…ŒìŠ¤íŠ¸ ì‹œì‘...');
    
    AccountSalesInsightService.AccountSalesData salesData = 
        AccountSalesInsightService.getAccountSalesInsight(targetAccount.Id);
    
    System.debug('âœ… ì˜ì—… ë°ì´í„° ì¡°íšŒ ì„±ê³µ');
    System.debug('   ìš°ì„ ìˆœìœ„: ' + salesData.priorityLevel);
    System.debug('   ìµœê·¼ ë§¤ì¶œ: â‚©' + (salesData.recentRevenue != null ? salesData.recentRevenue.format() : '0'));
    
    // 3. ì¶”ì²œ ì•¡ì…˜ í™•ì¸
    if (salesData.recommendedActions != null && !salesData.recommendedActions.isEmpty()) {
        System.debug('');
        System.debug('ğŸ’¡ ì¶”ì²œ ì•¡ì…˜ (' + salesData.recommendedActions.size() + 'ê°œ):');
        for (AccountSalesInsightService.RecommendedAction action : salesData.recommendedActions) {
            System.debug('   ' + action.icon + ' ' + action.title + ' (' + action.priority + ')');
            System.debug('     â†’ ' + action.description);
        }
    }
    
    // 4. ì˜ì—… ì¸ì‚¬ì´íŠ¸ í™•ì¸
    if (salesData.salesInsights != null && !salesData.salesInsights.isEmpty()) {
        System.debug('');
        System.debug('ğŸ“Š ì˜ì—… ì¸ì‚¬ì´íŠ¸ (' + salesData.salesInsights.size() + 'ê°œ):');
        for (String insight : salesData.salesInsights) {
            System.debug('   â€¢ ' + insight);
        }
    }
    
    // 5. ê¸°íšŒ ì˜ˆì¸¡ í™•ì¸
    if (salesData.opportunityForecast != null) {
        System.debug('');
        System.debug('ğŸ¯ ì˜ì—… ê¸°íšŒ ì˜ˆì¸¡:');
        System.debug('   ì˜ˆìƒ ê³„ì•½ ê·œëª¨: â‚©' + salesData.opportunityForecast.expectedAmount.format());
        System.debug('   ì„±ì‚¬ í™•ë¥ : ' + salesData.opportunityForecast.probability + '%');
        System.debug('   ì˜ˆìƒ ê¸°ê°„: ' + salesData.opportunityForecast.timeframe);
    }
    
    // 6. ì•¡ì…˜ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
    System.debug('');
    System.debug('âš¡ ì•¡ì…˜ ì‹¤í–‰ í…ŒìŠ¤íŠ¸...');
    
    // Task ìƒì„± í…ŒìŠ¤íŠ¸
    String taskResult = AccountSalesInsightService.executeAction(
        targetAccount.Id, 
        'createTask', 
        'Key Account ì •ê¸° ë¯¸íŒ… ì¼ì •'
    );
    System.debug('   Task ìƒì„± ê²°ê³¼: ' + taskResult);
    
    // Opportunity ìƒì„± í…ŒìŠ¤íŠ¸
    String oppResult = AccountSalesInsightService.executeAction(
        targetAccount.Id, 
        'createOpportunity', 
        ''
    );
    System.debug('   Opportunity ìƒì„± ê²°ê³¼: ' + oppResult);
    
    // 7. ê´€ë ¨ ë°ì´í„° í†µê³„
    System.debug('');
    System.debug('ğŸ“ˆ ê´€ë ¨ ë°ì´í„° í˜„í™©:');
    
    // Contacts ìˆ˜
    Integer contactCount = [SELECT COUNT() FROM Contact WHERE AccountId = :targetAccount.Id];
    System.debug('   ì—°ë½ì²˜: ' + contactCount + 'ê°œ');
    
    // Opportunities ìˆ˜
    Integer oppCount = [SELECT COUNT() FROM Opportunity WHERE AccountId = :targetAccount.Id AND StageName != 'Closed Lost'];
    System.debug('   í™œì„± ê¸°íšŒ: ' + oppCount + 'ê°œ');
    
    // Cases ìˆ˜
    Integer caseCount = [SELECT COUNT() FROM Case WHERE AccountId = :targetAccount.Id AND Status != 'Closed'];
    System.debug('   ì—´ë¦° ì¼€ì´ìŠ¤: ' + caseCount + 'ê°œ');
    
    // Orders ìˆ˜
    Integer orderCount = [SELECT COUNT() FROM Order WHERE AccountId = :targetAccount.Id AND Status = 'Activated'];
    System.debug('   í™œì„± ì£¼ë¬¸: ' + orderCount + 'ê°œ');
    
    // 8. UI ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜ ì•ˆë‚´
    System.debug('');
    System.debug('ğŸ¨ UI ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜ ë°©ë²•:');
    System.debug('1. Setup â†’ Object Manager â†’ Account â†’ Lightning Record Pages');
    System.debug('2. Account Record Page í¸ì§‘');
    System.debug('3. Custom ì»´í¬ë„ŒíŠ¸ì—ì„œ "Account Sales Insight" ì„ íƒ');
    System.debug('4. ì ì ˆí•œ ìœ„ì¹˜(ìƒë‹¨ ë˜ëŠ” ì‚¬ì´ë“œë°”)ì— ë°°ì¹˜');
    System.debug('5. í™œì„±í™” ë° ì €ì¥');
    
    // 9. ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸ ì•ˆë‚´
    System.debug('');
    System.debug('ğŸ“± ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸ ë°©ë²•:');
    System.debug('1. Salesforce Mobile App ì„¤ì¹˜');
    System.debug('2. Account: ' + targetAccount.Name + ' ì ‘ì†');
    System.debug('3. ì˜ì—… ì¸ì‚¬ì´íŠ¸ ì»´í¬ë„ŒíŠ¸ í™•ì¸');
    System.debug('4. í€µ ì•¡ì…˜ ë²„íŠ¼ ë™ì‘ í…ŒìŠ¤íŠ¸');
    
    // 10. ì„±ê³µ ì§€í‘œ ì¸¡ì • ì•ˆë‚´
    System.debug('');
    System.debug('ğŸ“Š ì„±ê³µ ì§€í‘œ ì¸¡ì • ë°©ë²•:');
    System.debug('â€¢ ì •ë³´ ìˆ˜ì§‘ ì‹œê°„: ê¸°ì¡´ ëŒ€ë¹„ 50% ë‹¨ì¶• ëª©í‘œ');
    System.debug('â€¢ ì¼ì¼ ê¶Œì¥ ì•¡ì…˜ ì‹¤í–‰ë¥ : 80% ì´ìƒ ëª©í‘œ');
    System.debug('â€¢ ì›” ì‹ ê·œ ê¸°íšŒ ìƒì„±: 20% ì¦ê°€ ëª©í‘œ');
    System.debug('â€¢ ì‚¬ìš©ì ë§Œì¡±ë„: ì„¤ë¬¸ì¡°ì‚¬ë¥¼ í†µí•œ ì •ëŸ‰ì  ì¸¡ì •');
    
    System.debug('');
    System.debug('âœ… Account ì˜ì—… íš¨ìœ¨ì„± UI ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!');
    System.debug('ğŸ¯ ë‹¤ìŒ ë‹¨ê³„: Lightning Record Pageì— ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜');
    
} catch (Exception e) {
    System.debug('âŒ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ' + e.getMessage());
    System.debug('Stack Trace: ' + e.getStackTraceString());
    
    // ë¬¸ì œ í•´ê²° ê°€ì´ë“œ
    System.debug('');
    System.debug('ğŸ”§ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ:');
    System.debug('1. Account "ê¹€ìºë”” (Kimcaddie)"ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸');
    System.debug('2. AccountSalesInsightService í´ë˜ìŠ¤ê°€ ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸');
    System.debug('3. í•„ìš”í•œ ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸ (Account, Task, Opportunity ìƒì„±)');
    System.debug('4. Custom í•„ë“œë“¤ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ (Key_Account__c ë“±)');
}

// ì¶”ê°€ ìœ í‹¸ë¦¬í‹°: í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
System.debug('');
System.debug('ğŸ› ï¸ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± (í•„ìš”ì‹œ ì‹¤í–‰):');
System.debug('');
System.debug('// í…ŒìŠ¤íŠ¸ìš© Account ìƒì„±');
System.debug('Account testAcc = new Account();');
System.debug('testAcc.Name = "í…ŒìŠ¤íŠ¸ ì˜ì—… ê³ ê°";');
System.debug('testAcc.Key_Account__c = true;');
System.debug('testAcc.Industry = "Technology";');
System.debug('testAcc.Phone = "(02) 1234-5678";');
System.debug('testAcc.Website = "https://test-company.com";');
System.debug('testAcc.AnnualRevenue = 500000000;');
System.debug('testAcc.NumberOfEmployees = 150;');
System.debug('insert testAcc;');
System.debug('');
System.debug('// ê´€ë ¨ Contact ìƒì„±');
System.debug('Contact testContact = new Contact();');
System.debug('testContact.AccountId = testAcc.Id;');
System.debug('testContact.FirstName = "í™";');
System.debug('testContact.LastName = "ê¸¸ë™";');
System.debug('testContact.Email = "hong@test-company.com";');
System.debug('testContact.Phone = "(02) 1234-5679";');
System.debug('insert testContact;');
