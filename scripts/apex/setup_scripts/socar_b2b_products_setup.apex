// ğŸš— ì˜ì¹´ B2B ì œí’ˆ ì¹´íƒˆë¡œê·¸ ë° êµ¬ë… ì„œë¹„ìŠ¤ ì„¤ì •
// Product2 ë° PricebookEntry ìƒì„±

System.debug('=== ì˜ì¹´ B2B êµ¬ë… ì„œë¹„ìŠ¤ ì œí’ˆ ì¹´íƒˆë¡œê·¸ ìƒì„± ===');

// 1. ì˜ì¹´ B2B ì œí’ˆ ìƒì„±
List<Product2> socarProducts = new List<Product2>();

// ê¸°ì—… ì°¨ëŸ‰ ê´€ë¦¬ ì„œë¹„ìŠ¤
socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ë¹„ì¦ˆë‹ˆìŠ¤ ë² ì´ì§',
    ProductCode = 'SOCAR_BIZ_BASIC',
    Family = 'Fleet Management',
    Description = 'ì¤‘ì†Œê¸°ì—…ì„ ìœ„í•œ ê¸°ë³¸ ì°¨ëŸ‰ ê´€ë¦¬ ì„œë¹„ìŠ¤ (ì›” 10ëŒ€ ì´í•˜)',
    IsActive = true
));

socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ë¹„ì¦ˆë‹ˆìŠ¤ í”„ë¡œ',
    ProductCode = 'SOCAR_BIZ_PRO', 
    Family = 'Fleet Management',
    Description = 'ì¤‘ê²¬ê¸°ì—…ì„ ìœ„í•œ ì „ë¬¸ ì°¨ëŸ‰ ê´€ë¦¬ ì„œë¹„ìŠ¤ (ì›” 50ëŒ€ ì´í•˜)',
    IsActive = true
));

socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ë¹„ì¦ˆë‹ˆìŠ¤ ì—”í„°í”„ë¼ì´ì¦ˆ',
    ProductCode = 'SOCAR_BIZ_ENT',
    Family = 'Fleet Management', 
    Description = 'ëŒ€ê¸°ì—…ì„ ìœ„í•œ í†µí•© ì°¨ëŸ‰ ê´€ë¦¬ ì„œë¹„ìŠ¤ (ë¬´ì œí•œ)',
    IsActive = true
));

// ì¥ê¸°ë Œí„°ì¹´ ì„œë¹„ìŠ¤
socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ì¥ê¸°ë Œí„°ì¹´ 12ê°œì›”',
    ProductCode = 'SOCAR_LONG_12M',
    Family = 'Long-term Rental',
    Description = '12ê°œì›” ì¥ê¸°ë Œí„°ì¹´ ì„œë¹„ìŠ¤ (ê²½í˜•/ì†Œí˜•ì°¨)',
    IsActive = true
));

socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ì¥ê¸°ë Œí„°ì¹´ 24ê°œì›”', 
    ProductCode = 'SOCAR_LONG_24M',
    Family = 'Long-term Rental',
    Description = '24ê°œì›” ì¥ê¸°ë Œí„°ì¹´ ì„œë¹„ìŠ¤ (ì¤‘í˜•/ëŒ€í˜•ì°¨)',
    IsActive = true
));

socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ì¥ê¸°ë Œí„°ì¹´ 36ê°œì›”',
    ProductCode = 'SOCAR_LONG_36M', 
    Family = 'Long-term Rental',
    Description = '36ê°œì›” ì¥ê¸°ë Œí„°ì¹´ ì„œë¹„ìŠ¤ (í”„ë¦¬ë¯¸ì—„/ì „ê¸°ì°¨)',
    IsActive = true
));

// ì¹´ì…°ì–´ë§ ì„œë¹„ìŠ¤
socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ë¹„ì¦ˆë‹ˆìŠ¤ ì¹´ì…°ì–´ë§',
    ProductCode = 'SOCAR_CARSHARE_BIZ',
    Family = 'Car Sharing',
    Description = 'ê¸°ì—… ì „ìš© ì¹´ì…°ì–´ë§ ì„œë¹„ìŠ¤ (ì‹œê°„ë‹¹ ì´ìš©)',
    IsActive = true
));

// ì „ê¸°ì°¨ íŠ¹í™” ì„œë¹„ìŠ¤
socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ê·¸ë¦° ë¹„ì¦ˆë‹ˆìŠ¤',
    ProductCode = 'SOCAR_GREEN_BIZ',
    Family = 'Electric Vehicle',
    Description = 'ì¹œí™˜ê²½ ì „ê¸°ì°¨ ì „ìš© ê¸°ì—… ì„œë¹„ìŠ¤',
    IsActive = true
));

// ë¶€ê°€ ì„œë¹„ìŠ¤
socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ë“œë¼ì´ë²„ ë§¤ì¹­',
    ProductCode = 'SOCAR_DRIVER_MATCH',
    Family = 'Additional Service',
    Description = 'ì „ë¬¸ ë“œë¼ì´ë²„ ë§¤ì¹­ ì„œë¹„ìŠ¤',
    IsActive = true
));

socarProducts.add(new Product2(
    Name = 'ì˜ì¹´ ì°¨ëŸ‰ ê´€ë¦¬ API',
    ProductCode = 'SOCAR_API_SERVICE',
    Family = 'Digital Service',
    Description = 'ê¸°ì—… ì‹œìŠ¤í…œ ì—°ë™ì„ ìœ„í•œ API ì„œë¹„ìŠ¤',
    IsActive = true
));

try {
    insert socarProducts;
    System.debug('âœ… ì˜ì¹´ B2B ì œí’ˆ ' + socarProducts.size() + 'ê°œ ìƒì„± ì™„ë£Œ');
} catch (Exception e) {
    System.debug('âŒ ì œí’ˆ ìƒì„± ì˜¤ë¥˜: ' + e.getMessage());
    return;
}

// 2. Standard Pricebook Entry ìƒì„± (í•„ìˆ˜)
Id standardPricebookId = Test.getStandardPricebookId();
List<PricebookEntry> standardEntries = new List<PricebookEntry>();

for (Product2 product : socarProducts) {
    standardEntries.add(new PricebookEntry(
        Pricebook2Id = standardPricebookId,
        Product2Id = product.Id,
        UnitPrice = 100000, // ê¸°ë³¸ ê°€ê²©
        IsActive = true
    ));
}

try {
    insert standardEntries;
    System.debug('âœ… Standard Pricebook Entry ' + standardEntries.size() + 'ê°œ ìƒì„± ì™„ë£Œ');
} catch (Exception e) {
    System.debug('âŒ Standard Pricebook Entry ìƒì„± ì˜¤ë¥˜: ' + e.getMessage());
}

// 3. ì˜ì¹´ B2B ì „ìš© Pricebook ìƒì„±
Pricebook2 socarPricebook = new Pricebook2(
    Name = 'ì˜ì¹´ B2B ê°€ê²©ì •ì±… 2024',
    Description = 'ì˜ì¹´ B2B ì„œë¹„ìŠ¤ ì „ìš© ê°€ê²© ì •ì±…',
    IsActive = true
);

try {
    insert socarPricebook;
    System.debug('âœ… ì˜ì¹´ B2B Pricebook ìƒì„± ì™„ë£Œ: ' + socarPricebook.Id);
} catch (Exception e) {
    System.debug('âŒ Pricebook ìƒì„± ì˜¤ë¥˜: ' + e.getMessage());
    return;
}

// 4. ì˜ì¹´ B2B Pricebook Entry ìƒì„± (ì‹¤ì œ êµ¬ë… ê°€ê²©)
List<PricebookEntry> socarPricingEntries = new List<PricebookEntry>();

// ì œí’ˆë³„ ì‹¤ì œ êµ¬ë… ê°€ê²© ì„¤ì •
Map<String, Decimal> productPricing = new Map<String, Decimal>{
    'SOCAR_BIZ_BASIC' => 980000,      // ì›” 98ë§Œì›
    'SOCAR_BIZ_PRO' => 2450000,       // ì›” 245ë§Œì›  
    'SOCAR_BIZ_ENT' => 4900000,       // ì›” 490ë§Œì›
    'SOCAR_LONG_12M' => 650000,       // ì›” 65ë§Œì›
    'SOCAR_LONG_24M' => 580000,       // ì›” 58ë§Œì› (í• ì¸)
    'SOCAR_LONG_36M' => 520000,       // ì›” 52ë§Œì› (ìµœëŒ€ í• ì¸)
    'SOCAR_CARSHARE_BIZ' => 1200000,  // ì›” 120ë§Œì›
    'SOCAR_GREEN_BIZ' => 1450000,     // ì›” 145ë§Œì›
    'SOCAR_DRIVER_MATCH' => 350000,   // ì›” 35ë§Œì›
    'SOCAR_API_SERVICE' => 150000     // ì›” 15ë§Œì›
};

for (Product2 product : socarProducts) {
    Decimal price = productPricing.get(product.ProductCode);
    if (price != null) {
        socarPricingEntries.add(new PricebookEntry(
            Pricebook2Id = socarPricebook.Id,
            Product2Id = product.Id,
            UnitPrice = price,
            IsActive = true
        ));
    }
}

try {
    insert socarPricingEntries;
    System.debug('âœ… ì˜ì¹´ B2B ê°€ê²© ì •ì±… ' + socarPricingEntries.size() + 'ê°œ ì„¤ì • ì™„ë£Œ');
} catch (Exception e) {
    System.debug('âŒ ê°€ê²© ì •ì±… ì„¤ì • ì˜¤ë¥˜: ' + e.getMessage());
}

// 5. ìƒì„± ê²°ê³¼ ìš”ì•½
System.debug('ğŸ‰ ì˜ì¹´ B2B ì œí’ˆ ì¹´íƒˆë¡œê·¸ ìƒì„± ì™„ë£Œ!');
System.debug('ğŸ“Š ìƒì„± ì™„ë£Œ ìš”ì•½:');
System.debug('- B2B ì œí’ˆ: ' + socarProducts.size() + 'ê°œ');
System.debug('- ê°€ê²© ì •ì±…: ' + socarPricingEntries.size() + 'ê°œ');

Decimal totalMonthlyRevenuePotential = 0;
for (PricebookEntry entry : socarPricingEntries) {
    totalMonthlyRevenuePotential += entry.UnitPrice;
}
System.debug('- ì „ì²´ ì œí’ˆ ì›”ê°„ ìˆ˜ìµ ì ì¬ë ¥: â‚©' + String.valueOf(totalMonthlyRevenuePotential.longValue()) + 'ì›');

System.debug('ğŸš— ì˜ì¹´ B2B êµ¬ë… ì„œë¹„ìŠ¤ ì¤€ë¹„ ì™„ë£Œ!');
