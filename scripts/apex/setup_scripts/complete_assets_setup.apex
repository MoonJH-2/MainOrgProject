// ğŸš€ ì™„ì „í•œ Assets í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ìŠ¤í¬ë¦½íŠ¸
// í•œêµ­ ëŒ€ê¸°ì—… 5ê°œì‚¬ + ì¦‰ì‹œ ê°±ì‹  ê°€ëŠ¥í•œ Assets ìƒì„±

System.debug('=== í•œêµ­ ëŒ€ê¸°ì—… Assets í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì‹œì‘ ===');

// 1. ê¸°ì¡´ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì •ë¦¬ (ì„ íƒì‚¬í•­)
try {
    List<Asset> existingAssets = [SELECT Id FROM Asset WHERE Name LIKE '%í…ŒìŠ¤íŠ¸%' LIMIT 100];
    if (!existingAssets.isEmpty()) {
        delete existingAssets;
        System.debug('ê¸°ì¡´ í…ŒìŠ¤íŠ¸ Assets ' + existingAssets.size() + 'ê°œ ì •ë¦¬ ì™„ë£Œ');
    }
} catch (Exception e) {
    System.debug('ê¸°ì¡´ ë°ì´í„° ì •ë¦¬ ì¤‘ ì˜¤ë¥˜ (ë¬´ì‹œ): ' + e.getMessage());
}

// 2. í•œêµ­ ëŒ€ê¸°ì—… ê³„ì • ìƒì„±
List<Account> companies = new List<Account>();

// ì‚¼ì„±ì „ì
companies.add(new Account(
    Name = 'ì‚¼ì„±ì „ì',
    Type = 'Customer',
    Industry = 'ì „ìì œí’ˆ',
    Phone = '02-2255-0114',
    BillingStreet = 'ê²½ê¸°ë„ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ì‚¼ì„±ë¡œ 129',
    BillingCity = 'ìˆ˜ì›ì‹œ',
    BillingState = 'ê²½ê¸°ë„',
    BillingCountry = 'ëŒ€í•œë¯¼êµ­',
    AnnualRevenue = 2500000000000.00,
    NumberOfEmployees = 267937
));

// LGì „ì
companies.add(new Account(
    Name = 'LGì „ì',
    Type = 'Customer', 
    Industry = 'ì „ìì œí’ˆ',
    Phone = '02-3777-1114',
    BillingStreet = 'ì„œìš¸íŠ¹ë³„ì‹œ ì˜ë“±í¬êµ¬ ì—¬ì˜ëŒ€ë¡œ 128',
    BillingCity = 'ì„œìš¸íŠ¹ë³„ì‹œ',
    BillingState = 'ì„œìš¸íŠ¹ë³„ì‹œ',
    BillingCountry = 'ëŒ€í•œë¯¼êµ­',
    AnnualRevenue = 750000000000.00,
    NumberOfEmployees = 75000
));

// ë„¤ì´ë²„
companies.add(new Account(
    Name = 'ë„¤ì´ë²„',
    Type = 'Customer',
    Industry = 'IT ì„œë¹„ìŠ¤',
    Phone = '1588-3820',
    BillingStreet = 'ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë¶„ë‹¹êµ¬ ë¶ˆì •ë¡œ 6',
    BillingCity = 'ì„±ë‚¨ì‹œ',
    BillingState = 'ê²½ê¸°ë„',
    BillingCountry = 'ëŒ€í•œë¯¼êµ­',
    AnnualRevenue = 56000000000.00,
    NumberOfEmployees = 3500
));

// ì¹´ì¹´ì˜¤
companies.add(new Account(
    Name = 'ì¹´ì¹´ì˜¤',
    Type = 'Customer',
    Industry = 'IT ì„œë¹„ìŠ¤',
    Phone = '1577-3754',
    BillingStreet = 'ì œì£¼íŠ¹ë³„ìì¹˜ë„ ì œì£¼ì‹œ ì²¨ë‹¨ë¡œ 242',
    BillingCity = 'ì œì£¼ì‹œ',
    BillingState = 'ì œì£¼íŠ¹ë³„ìì¹˜ë„',
    BillingCountry = 'ëŒ€í•œë¯¼êµ­',
    AnnualRevenue = 65000000000.00,
    NumberOfEmployees = 4500
));

// í˜„ëŒ€ìë™ì°¨
companies.add(new Account(
    Name = 'í˜„ëŒ€ìë™ì°¨',
    Type = 'Customer',
    Industry = 'ìë™ì°¨',
    Phone = '02-3464-1114',
    BillingStreet = 'ì„œìš¸íŠ¹ë³„ì‹œ ì„œì´ˆêµ¬ í—Œë¦‰ë¡œ 12',
    BillingCity = 'ì„œìš¸íŠ¹ë³„ì‹œ',
    BillingState = 'ì„œìš¸íŠ¹ë³„ì‹œ',
    BillingCountry = 'ëŒ€í•œë¯¼êµ­',
    AnnualRevenue = 1200000000000.00,
    NumberOfEmployees = 120000
));

try {
    insert companies;
    System.debug('âœ… ëŒ€ê¸°ì—… ê³„ì • ' + companies.size() + 'ê°œ ìƒì„± ì™„ë£Œ');
} catch (Exception e) {
    System.debug('âŒ ê³„ì • ìƒì„± ì˜¤ë¥˜: ' + e.getMessage());
    return;
}

// 3. Product ìƒì„± (Assetsìš©)
List<Product2> products = new List<Product2>();

products.add(new Product2(
    Name = 'Enterprise Cloud Platform',
    Family = 'Software',
    Description = 'ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ í´ë¼ìš°ë“œ í”Œë«í¼ ì†”ë£¨ì…˜',
    IsActive = true
));

products.add(new Product2(
    Name = 'AI Analytics Suite',
    Family = 'Software', 
    Description = 'AI ê¸°ë°˜ ë°ì´í„° ë¶„ì„ í”Œë«í¼',
    IsActive = true
));

products.add(new Product2(
    Name = 'Security Management System',
    Family = 'Software',
    Description = 'í†µí•© ë³´ì•ˆ ê´€ë¦¬ ì‹œìŠ¤í…œ',
    IsActive = true
));

products.add(new Product2(
    Name = 'Mobile App Development Kit',
    Family = 'Software',
    Description = 'ëª¨ë°”ì¼ ì•± ê°œë°œ ë„êµ¬',
    IsActive = true
));

products.add(new Product2(
    Name = 'IoT Device Management',
    Family = 'Hardware',
    Description = 'IoT ë””ë°”ì´ìŠ¤ í†µí•© ê´€ë¦¬ ì†”ë£¨ì…˜',
    IsActive = true
));

try {
    insert products;
    System.debug('âœ… ì œí’ˆ ' + products.size() + 'ê°œ ìƒì„± ì™„ë£Œ');
} catch (Exception e) {
    System.debug('âŒ ì œí’ˆ ìƒì„± ì˜¤ë¥˜: ' + e.getMessage());
    return;
}

// 4. Assets ìƒì„± - ì¦‰ì‹œ ê°±ì‹  ê°€ëŠ¥í•˜ë„ë¡ InstallDate ì¡°ì •
List<Asset> assets = new List<Asset>();
Date installDate = Date.today().addDays(-2); // 2ì¼ ì „ ì„¤ì¹˜ë¡œ ì¦‰ì‹œ ê°±ì‹  ê°€ëŠ¥
Integer assetCounter = 1;

for (Account company : companies) {
    for (Product2 product : products) {
        // ê° íšŒì‚¬ë§ˆë‹¤ ê° ì œí’ˆì˜ Asset ìƒì„±
        Asset newAsset = new Asset(
            Name = company.Name + ' - ' + product.Name + ' í…ŒìŠ¤íŠ¸',
            AccountId = company.Id,
            Product2Id = product.Id,
            Status = 'Installed',
            InstallDate = installDate,
            PurchaseDate = installDate,
            UsageEndDate = installDate.addDays(365), // 1ë…„ ê³„ì•½
            Price = 50000000 + (assetCounter * 5000000), // 5ì²œë§Œì› ~ 1ì–µì›
            Quantity = Math.mod(assetCounter, 5) + 1, // 1~5ê°œ
            Description = company.Name + 'ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ' + product.Name + ' ì‹œìŠ¤í…œ'
        );
        
        assets.add(newAsset);
        assetCounter++;
        
        // ì¶”ê°€ Asset (ì¼ë¶€ íšŒì‚¬ì—ë§Œ)
        if (Math.mod(assetCounter, 3) == 0) {
            Asset additionalAsset = new Asset(
                Name = company.Name + ' - ' + product.Name + ' ì¶”ê°€ í…ŒìŠ¤íŠ¸',
                AccountId = company.Id,
                Product2Id = product.Id,
                Status = 'Installed',
                InstallDate = installDate.addDays(-1), // 1ì¼ ì „
                PurchaseDate = installDate.addDays(-1),
                UsageEndDate = installDate.addDays(730), // 2ë…„ ê³„ì•½
                Price = 30000000 + (assetCounter * 3000000),
                Quantity = 1,
                Description = company.Name + ' ì¶”ê°€ ë¼ì´ì„ ìŠ¤'
            );
            assets.add(additionalAsset);
        }
    }
}

try {
    insert assets;
    System.debug('âœ… Assets ' + assets.size() + 'ê°œ ìƒì„± ì™„ë£Œ');
    
    // ìƒì„±ëœ Assets ìš”ì•½ ì¶œë ¥
    Decimal totalValue = 0;
    for (Asset a : assets) {
        totalValue += a.Price * a.Quantity;
    }
    
    System.debug('ğŸ“Š ìƒì„± ì™„ë£Œ ìš”ì•½:');
    System.debug('- ëŒ€ê¸°ì—… ê³„ì •: ' + companies.size() + 'ê°œ');
    System.debug('- ì œí’ˆ: ' + products.size() + 'ê°œ');  
    System.debug('- Assets: ' + assets.size() + 'ê°œ');
    System.debug('- ì´ ìì‚° ê°€ì¹˜: â‚©' + String.valueOf(totalValue.longValue()) + 'ì›');
    System.debug('- ëª¨ë“  AssetsëŠ” ì¦‰ì‹œ ê°±ì‹  ê°€ëŠ¥ ìƒíƒœì…ë‹ˆë‹¤ (ì„¤ì¹˜ì¼: ' + installDate + ')');
    
} catch (Exception e) {
    System.debug('âŒ Assets ìƒì„± ì˜¤ë¥˜: ' + e.getMessage());
    System.debug('ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤: ' + e.getStackTraceString());
    return;
}

// 5. ìƒì„±ëœ Assets í™•ì¸
try {
    List<Asset> createdAssets = [
        SELECT Id, Name, Account.Name, Product2.Name, Status, InstallDate, Price, Quantity
        FROM Asset 
        WHERE Name LIKE '%í…ŒìŠ¤íŠ¸%' 
        ORDER BY Account.Name, Product2.Name
        LIMIT 50
    ];
    
    System.debug('ğŸ” ìƒì„±ëœ Assets í™•ì¸:');
    for (Asset a : createdAssets) {
        System.debug('- ' + a.Account.Name + ': ' + a.Name + 
                    ' (â‚©' + String.valueOf(a.Price.longValue()) + 'x' + a.Quantity + ')');
    }
    
} catch (Exception e) {
    System.debug('Assets í™•ì¸ ì¤‘ ì˜¤ë¥˜: ' + e.getMessage());
}

// 6. AssetPriorityCalculator í…ŒìŠ¤íŠ¸
try {
    System.debug('ğŸ§® Asset ìš°ì„ ìˆœìœ„ ê³„ì‚° í…ŒìŠ¤íŠ¸...');
    List<AssetPriorityCalculator.AssetScore> priorities = AssetPriorityCalculator.calculateAssetPriorities();
    
    System.debug('ê³„ì‚°ëœ ìš°ì„ ìˆœìœ„ Assets: ' + priorities.size() + 'ê°œ');
    for (Integer i = 0; i < Math.min(5, priorities.size()); i++) {
        AssetPriorityCalculator.AssetScore score = priorities[i];
        System.debug('ìš°ì„ ìˆœìœ„ ' + (i+1) + ': ' + score.assetName + 
                    ' (ì ìˆ˜: ' + score.totalScore + ', ê³ ê°: ' + score.accountName + ')');
    }
    
} catch (Exception e) {
    System.debug('ìš°ì„ ìˆœìœ„ ê³„ì‚° í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ' + e.getMessage());
}

System.debug('=== ğŸ‰ Assets í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ì™„ë£Œ! ===');
System.debug('ì´ì œ ì„±ê³¼ ì¶”ì  ëŒ€ì‹œë³´ë“œì—ì„œ "Assets ë°ì´í„° ìƒì„±" ë° "ì „ì²´ ê°±ì‹  ì‹¤í–‰" ë²„íŠ¼ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!');
